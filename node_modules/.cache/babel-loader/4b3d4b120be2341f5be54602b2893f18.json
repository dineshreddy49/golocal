{"ast":null,"code":"import { USER_LOGIN_FAILURE, USER_LOGIN_REQUEST, USER_LOGIN_SUCCESS, USER_LOGOUT_REQUEST } from \"./loginTypes\";\nimport axios from 'axios';\nexport const loginRequest = () => {\n  return {\n    type: USER_LOGIN_REQUEST\n  };\n};\nexport const loginSuccess = users => {\n  return {\n    type: USER_LOGIN_SUCCESS,\n    payload: users\n  };\n};\nexport const loginFailure = error => {\n  return {\n    type: USER_LOGIN_FAILURE,\n    payload: error\n  };\n};\nexport const logoutRequest = () => {\n  localStorage.clear();\n  return {\n    type: USER_LOGOUT_REQUEST\n  };\n};\nexport const loginUser = details => {\n  return dispatch => {\n    dispatch(loginRequest);\n    axios.post('https://golocal999.herokuapp.com/api/signin', details).then(response => {\n      const users = response.data;\n      const {\n        token,\n        user\n      } = response.data;\n      localStorage.setItem(\"token\", token);\n      localStorage.setItem(\"id\", JSON.stringify(user._id));\n      dispatch(loginSuccess(users));\n    }).catch(error => {\n      const errorMsg = error.message;\n      dispatch(loginFailure(errorMsg));\n    });\n  };\n};\nexport const isUserLoggedIn = () => {\n  return async dispatch => {\n    const token = localStorage.getItem(\"token\");\n\n    if (token) {\n      const user = JSON.parse(localStorage.getItem(\"user\"));\n      loginSuccess(user);\n    } else {\n      const errorMsg = \"Failed to login\";\n      dispatch(loginFailure(errorMsg));\n    }\n  };\n};","map":{"version":3,"sources":["C:/Users/sreel/Desktop/Final Frontend/golocal/src/Redux/Login/loginActions.js"],"names":["USER_LOGIN_FAILURE","USER_LOGIN_REQUEST","USER_LOGIN_SUCCESS","USER_LOGOUT_REQUEST","axios","loginRequest","type","loginSuccess","users","payload","loginFailure","error","logoutRequest","localStorage","clear","loginUser","details","dispatch","post","then","response","data","token","user","setItem","JSON","stringify","_id","catch","errorMsg","message","isUserLoggedIn","getItem","parse"],"mappings":"AAAA,SAASA,kBAAT,EAA4BC,kBAA5B,EAA+CC,kBAA/C,EAAkEC,mBAAlE,QAA6F,cAA7F;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAO,MAAMC,YAAY,GAAC,MAC1B;AACI,SAAM;AACFC,IAAAA,IAAI,EAACL;AADH,GAAN;AAGH,CALM;AAMP,OAAO,MAAMM,YAAY,GAACC,KAAK,IAC/B;AACI,SAAM;AACFF,IAAAA,IAAI,EAACJ,kBADH;AAEFO,IAAAA,OAAO,EAAED;AAFP,GAAN;AAIH,CANM;AAOP,OAAO,MAAME,YAAY,GAACC,KAAK,IAC/B;AACI,SAAM;AACFL,IAAAA,IAAI,EAACN,kBADH;AAEFS,IAAAA,OAAO,EAAEE;AAFP,GAAN;AAIH,CANM;AAOP,OAAO,MAAMC,aAAa,GAAC,MAC3B;AACIC,EAAAA,YAAY,CAACC,KAAb;AACA,SAAM;AACFR,IAAAA,IAAI,EAACH;AADH,GAAN;AAGH,CANM;AAOP,OAAO,MAAMY,SAAS,GAACC,OAAO,IAAE;AAC5B,SAAOC,QAAD,IAAY;AACdA,IAAAA,QAAQ,CAACZ,YAAD,CAAR;AACAD,IAAAA,KAAK,CAACc,IAAN,CAAW,6CAAX,EAAyDF,OAAzD,EACCG,IADD,CACMC,QAAQ,IAAG;AACb,YAAMZ,KAAK,GAAGY,QAAQ,CAACC,IAAvB;AACA,YAAM;AAAEC,QAAAA,KAAF;AAASC,QAAAA;AAAT,UAAkBH,QAAQ,CAACC,IAAjC;AACNR,MAAAA,YAAY,CAACW,OAAb,CAAqB,OAArB,EAA8BF,KAA9B;AACAT,MAAAA,YAAY,CAACW,OAAb,CAAqB,IAArB,EAA2BC,IAAI,CAACC,SAAL,CAAeH,IAAI,CAACI,GAApB,CAA3B;AACMV,MAAAA,QAAQ,CAACV,YAAY,CAACC,KAAD,CAAb,CAAR;AACH,KAPD,EAQCoB,KARD,CAQOjB,KAAK,IAAE;AACV,YAAMkB,QAAQ,GAAElB,KAAK,CAACmB,OAAtB;AACAb,MAAAA,QAAQ,CAACP,YAAY,CAACmB,QAAD,CAAb,CAAR;AACH,KAXD;AAYH,GAdD;AAeH,CAhBM;AAiBP,OAAO,MAAME,cAAc,GAAG,MAAM;AAChC,SAAO,MAAOd,QAAP,IAAoB;AACzB,UAAMK,KAAK,GAAGT,YAAY,CAACmB,OAAb,CAAqB,OAArB,CAAd;;AACA,QAAIV,KAAJ,EAAW;AACT,YAAMC,IAAI,GAAGE,IAAI,CAACQ,KAAL,CAAWpB,YAAY,CAACmB,OAAb,CAAqB,MAArB,CAAX,CAAb;AACAzB,MAAAA,YAAY,CAACgB,IAAD,CAAZ;AACD,KAHD,MAGO;AACL,YAAMM,QAAQ,GAAG,iBAAjB;AACIZ,MAAAA,QAAQ,CAACP,YAAY,CAACmB,QAAD,CAAb,CAAR;AACL;AACF,GATD;AAUD,CAXI","sourcesContent":["import { USER_LOGIN_FAILURE,USER_LOGIN_REQUEST,USER_LOGIN_SUCCESS,USER_LOGOUT_REQUEST } from \"./loginTypes\"\r\nimport axios from 'axios'\r\nexport const loginRequest=()=>\r\n{\r\n    return{\r\n        type:USER_LOGIN_REQUEST\r\n    }\r\n}\r\nexport const loginSuccess=users=>\r\n{\r\n    return{\r\n        type:USER_LOGIN_SUCCESS,\r\n        payload: users\r\n    }\r\n}\r\nexport const loginFailure=error=>\r\n{\r\n    return{\r\n        type:USER_LOGIN_FAILURE,\r\n        payload: error\r\n    }\r\n}\r\nexport const logoutRequest=()=>\r\n{\r\n    localStorage.clear();\r\n    return{\r\n        type:USER_LOGOUT_REQUEST\r\n    }\r\n}\r\nexport const loginUser=details=>{\r\n    return(dispatch)=>{\r\n        dispatch(loginRequest)\r\n        axios.post('https://golocal999.herokuapp.com/api/signin',details)\r\n        .then(response =>{\r\n            const users = response.data\r\n            const { token, user } = response.data;\r\n      localStorage.setItem(\"token\", token);\r\n      localStorage.setItem(\"id\", JSON.stringify(user._id));\r\n            dispatch(loginSuccess(users))\r\n        })\r\n        .catch(error=>{\r\n            const errorMsg =error.message\r\n            dispatch(loginFailure(errorMsg))\r\n        })\r\n    }\r\n}\r\nexport const isUserLoggedIn = () => {\r\n    return async (dispatch) => {\r\n      const token = localStorage.getItem(\"token\");\r\n      if (token) {\r\n        const user = JSON.parse(localStorage.getItem(\"user\"));\r\n        loginSuccess(user)\r\n      } else {\r\n        const errorMsg = \"Failed to login\"\r\n            dispatch(loginFailure(errorMsg));\r\n      }\r\n    };\r\n  };"]},"metadata":{},"sourceType":"module"}